import{t as q,f as D,d as O,u as H,j as e,B as b,m as V,g as F,e as L,b as y,h as X,r as E,o as $,q as G}from"./app-CWuogeuA.js";import{E as J}from"./EmptyWithIcon-Ed5vXGFV.js";import{M as K}from"./MainLayout-CE7MuGsf.js";import{c as U,a as Y}from"./datetime-ChC_71Zn.js";import{b as Z,c as ee,a as N}from"./route-HpiTa34D.js";import{B as te}from"./Breadcrumbs-D_Kk8znN.js";import{T as B}from"./Title-bWYyVAL-.js";import{S as se}from"./Select-Bn4NAItF.js";import{g as ie}from"./get-auto-contrast-value-Da6zqqWm.js";import{A as W}from"./Anchor-BBg-j18l.js";import{T as R}from"./Text-DBjpm_Fk.js";import{T as re}from"./Tooltip-DPD_X-vc.js";import{C as oe}from"./Center-DiF0sA08.js";import{c as g}from"./createReactComponent-BZslM3T3.js";import{I as ae}from"./IconArchive-Bkr4SLne.js";import{I as le}from"./IconMessage-Cma70nuv.js";import{I as ne}from"./IconClock-DJzwbuHJ.js";import{I as ce}from"./IconCheck-BPJh1qwT.js";import{I as me}from"./IconX-BOXkk-2Q.js";import{I as de}from"./IconPlus-CTmqzJPW.js";import"./FlashNotification-CUEjPccD.js";import"./use-disclosure-DdlN0XeZ.js";import"./IconInfoCircle-BU4LTY3o.js";import"./IconCircleX-C_rRrgjf.js";import"./useWebSockets-BSR8MU8Y.js";import"./index-BYaGWh-B.js";import"./useTaskGroupsStore-YIpScD4-.js";import"./reorder-DEPdcA2I.js";import"./_baseClone-j4chtsIi.js";import"./useTasksStore-c3WoVS5K.js";import"./use-computed-color-scheme-DxTmAknQ.js";import"./get-style-object-DUJZA7T_.js";import"./user-IyQLa11_.js";import"./Menu-LLfB-uq4.js";import"./use-resolved-styles-api-D8xKo8RY.js";import"./Popover-aOZF2sDJ.js";import"./DirectionProvider-D0Syn9za.js";import"./use-floating-auto-update-B-_0Oi9q.js";import"./use-uncontrolled-Dq7POLQj.js";import"./Avatar-BCESiNXx.js";import"./upper-first-sQkIoMXG.js";import"./IconLayoutList-CcvDTy9J.js";import"./IconUsers-DgTwuMK6.js";import"./ScrollArea-CoM5ddBT.js";import"./useTranslation-BMED3SRO.js";import"./ActionIcon-CHZoSw_v.js";import"./get-sorted-breakpoints-CRzXWRXT.js";import"./OptionsDropdown-ZaBUUms4.js";import"./CheckIcon-2w3lxFdE.js";import"./Combobox-BblCFk_J.js";import"./Input-BJ3Z7SeR.js";import"./create-optional-context-D29aDTej.js";import"./InputBase-CS0Y85uP.js";const[pe,he]=q("Timeline component was not found in tree");var z={root:"m_43657ece",itemTitle:"m_2ebe8099",item:"m_436178ff",itemBullet:"m_8affcee1",itemBody:"m_540e8f41"};const ue={},A=D((i,c)=>{const r=O("TimelineItem",ue,i),{classNames:l,className:o,style:a,styles:t,vars:s,__active:v,__align:I,__lineActive:d,__vars:Q,bullet:k,radius:_,color:p,lineVariant:C,children:f,title:j,mod:S,...M}=r,n=he(),h=H(),m={classNames:l,styles:t};return e.jsxs(b,{...n.getStyles("item",{...m,className:o,style:a}),mod:[{"line-active":d,active:v},S],ref:c,__vars:{"--tli-radius":_?V(_):void 0,"--tli-color":p?F(p,h):void 0,"--tli-border-style":C||void 0},...M,children:[e.jsx(b,{...n.getStyles("itemBullet",m),mod:{"with-child":!!k,align:I,active:v},children:k}),e.jsxs("div",{...n.getStyles("itemBody",m),children:[j&&e.jsx("div",{...n.getStyles("itemTitle",m),children:j}),e.jsx("div",{...n.getStyles("itemContent",m),children:f})]})]})});A.classes=z;A.displayName="@mantine/core/TimelineItem";const ve={active:-1,align:"left",reverseActive:!1},fe=X((i,{bulletSize:c,lineWidth:r,radius:l,color:o,autoContrast:a})=>({root:{"--tl-bullet-size":E(c),"--tl-line-width":E(r),"--tl-radius":l===void 0?void 0:V(l),"--tl-color":o?F(o,i):void 0,"--tl-icon-color":ie(a,i)?$({color:o,theme:i,autoContrast:a}):void 0}})),u=D((i,c)=>{const r=O("Timeline",ve,i),{classNames:l,className:o,style:a,styles:t,unstyled:s,vars:v,children:I,active:d,color:Q,radius:k,bulletSize:_,align:p,lineWidth:C,reverseActive:f,mod:j,autoContrast:S,...M}=r,n=L({name:"Timeline",classes:z,props:r,className:o,style:a,classNames:l,styles:t,unstyled:s,vars:v,varsResolver:fe}),h=y.Children.toArray(I),m=h.map((T,x)=>{var w,P;return y.cloneElement(T,{unstyled:s,__align:p,__active:((w=T.props)==null?void 0:w.active)||(f?d>=h.length-x-1:d>=x),__lineActive:((P=T.props)==null?void 0:P.lineActive)||(f?d>=h.length-x-1:d-1>=x)})});return e.jsx(pe,{value:{getStyles:n},children:e.jsx(b,{...n("root"),mod:[{align:p},j],ref:c,...M,children:m})})});u.classes=z;u.displayName="@mantine/core/Timeline";u.Item=A;/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var je=g("outline","activity","IconActivity",[["path",{d:"M3 12h4l3 8l4 -16l3 8h4",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xe=g("outline","calendar-month","IconCalendarMonth",[["path",{d:"M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z",key:"svg-0"}],["path",{d:"M16 3v4",key:"svg-1"}],["path",{d:"M8 3v4",key:"svg-2"}],["path",{d:"M4 11h16",key:"svg-3"}],["path",{d:"M7 14h.013",key:"svg-4"}],["path",{d:"M10.01 14h.005",key:"svg-5"}],["path",{d:"M13.01 14h.005",key:"svg-6"}],["path",{d:"M16.015 14h.005",key:"svg-7"}],["path",{d:"M13.015 17h.005",key:"svg-8"}],["path",{d:"M7.01 17h.005",key:"svg-9"}],["path",{d:"M10.01 17h.005",key:"svg-10"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ye=g("outline","edit","IconEdit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ge=g("outline","paperclip","IconPaperclip",[["path",{d:"M15 7l-6.5 6.5a1.5 1.5 0 0 0 3 3l6.5 -6.5a3 3 0 0 0 -6 -6l-6.5 6.5a4.5 4.5 0 0 0 9 9l6.5 -6.5",key:"svg-0"}]]);const Ie=()=>{var a;let{groupedActivities:i,dropdowns:c}=G().props;const[r,l]=y.useState(((a=route().params)==null?void 0:a.project)||"0");y.useEffect(()=>{r>0?Z({project:r}):ee({exclude:["project"]})},[r]);const o=t=>{if(t.includes("archived"))return e.jsx(ae,{size:18});if(t.includes("comment"))return e.jsx(le,{size:18});if(t.includes("was changed"))return e.jsx(ye,{size:18});if(t.includes("Due date"))return e.jsx(xe,{size:18});if(t.includes("Attachment"))return e.jsx(ge,{size:18});if(t.includes("Estimation was set"))return e.jsx(ne,{size:18});if(t.includes("was completed"))return e.jsx(ce,{size:18});if(t.includes("uncompleted"))return e.jsx(me,{size:18});if(t==="New task"||t==="New project"||t.includes("Assigned user"))return e.jsx(de,{size:18})};return e.jsxs(e.Fragment,{children:[e.jsxs(te,{fz:14,mb:30,children:[e.jsx("div",{children:"My Work"}),e.jsx("div",{children:"Projects activity"})]}),e.jsx(B,{order:1,mb:20,children:"Projects activity"}),e.jsx(se,{size:"md",placeholder:"Select project",allowDeselect:!1,value:r,onChange:t=>l(t),data:c.projects,mb:35,maw:260}),Object.keys(i).length?Object.keys(i).map(t=>e.jsxs("div",{children:[e.jsx(B,{order:3,mb:"lg",children:t}),e.jsx(u,{active:9999,bulletSize:32,lineWidth:3,mb:"xl",children:i[t].map(s=>e.jsxs(u.Item,{bullet:o(s.title),children:[e.jsxs("div",{children:[e.jsx(W,{href:"#",fz:"md",fw:600,onClick:()=>N("projects.tasks.open",[s.project.id,s.activity_capable.id]),children:s.title}),e.jsx(R,{c:"dimmed",size:"sm",children:s.subtitle}),e.jsx(W,{href:"#",fz:"xs",onClick:()=>N("projects.tasks",[s.project_id]),children:s.project.name})]}),e.jsx(re,{label:U(s.created_at),openDelay:1e3,withArrow:!0,children:e.jsx(R,{inline:!0,span:!0,size:"xs",mt:4,children:Y(s.created_at)})})]},s.id))})]},t)):e.jsx(oe,{mih:300,children:e.jsx(J,{title:"No activities found",subtitle:"On projects you have access to",icon:je})})]})};Ie.layout=i=>e.jsx(K,{title:"Activity",children:i});export{Ie as default};
